{% extends 'base.html.twig' %}


 {% block javascripts %}
     {#     <script src="{{ asset('js/product.js') }}"></script> #}
 {% endblock %}

{% block stylesheets %}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Protest+Riot&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
          rel="stylesheet">
{% endblock %}

{% block body %}


    <div>
        <div class="" id="loading-div">
        </div>
        <div class="" id="container">
            <!-- start page title area -->
            <div class="rn-breadcrumb-inner ptb--30 ">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-lg-6 col-md-6 col-12">
                            <h5 class="title text-center text-md-start">Crete a New File</h5>
                        </div>
                        <div class="col-lg-6 col-md-6 col-12">
                            <ul class="breadcrumb-list">
                                <li class="item"><a href="index.html">Home</a></li>
                                <li class="separator"><i class="feather-chevron-right"></i></li>
                                <li class="item current">Crete a New File</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- end page title area -->
            <!-- create new product area -->
            <div class="create-area rn-section-gapTop">
                <div class="container">
                    <div class="row g-5">
                        <div class="col-lg-3 offset-1 ml_md--0 ml_sm--0">
                            {% if update == false %}
                                <!-- file upload area -->
                                <div class="upload-area">
                                    <div class="upload-formate mb--30">
                                        <h6 class="title">Upload file</h6>
                                        <p class="formate">Drag or choose your file to upload</p>
                                    </div>

                                    <div class="brows-file-wrapper">
                                        <!-- actual upload which is hidden -->
                                        <input
                                                name="createinputfile"
                                                id="createinputfile"
                                                type="file"
                                                class="inputfile"
                                                multiple
                                        />
                                        <img
                                                id="createfileImage"
                                                src="{{ asset('assets/images/portfolio/portfolio-05.jpg') }}"
                                                alt=""
                                                data-black-overlay="6"
                                        />

                                        <!-- our custom upload button -->
                                        <label for="createinputfile" title="No File Choosen">
                                            <i class="feather-upload"></i>
                                            <span class="text-center">Choose a File</span>
                                            <p class="text-center mt&#45;&#45;10">
                                                PNG, GIF, WEBP, MP4 or MP3. <br/>
                                                Max 1Gb.
                                            </p>
                                        </label>


                                    </div>
                                    <div id="error-message-image" class="error">
                                    </div>
                                </div>
                            {% else %}
                                <div class="upload-area">

                                    <div class="upload-formate mb--30">
                                        <h6 class="title">
                                            Upload file
                                        </h6>
                                        <p class="formate">
                                            Drag or choose your file to upload
                                        </p>
                                    </div>
                                    <!--                                        this-->
                                    <!--{# <div class="swiper rounded effect-creative-swiper" id="product_images_">
                                        <input hidden="" name="createinputfile" id="createinputfile" type="file"
                                               class="inputfile">
                                        {% if product.images|length == 1 %}
                                            <div class="brows-file-wrapper">
                                                <img id="createfileImage"
                                                     src="{{ asset(product.images[0].path) }}" alt=""
                                                     data-black-overlay="6">
                                                &lt;!&ndash; our custom upload button &ndash;&gt;
                                                <label for="createinputfile" title="No File Choosen">
                                                    <i class="feather-upload"></i>
                                                    <span class="text-center">Choose a File</span>
                                                    <p class="text-center mt&#45;&#45;10">PNG, GIF, WEBP, MP4 or MP3. <br> Max
                                                        1Gb.</p>
                                                </label>
                                            </div>
                                        {% else %}
                                            <div class="swiper-wrapper" id="swiperContainer">
                                                {% for index,image in product.images %}
                                                    <div class="swiper-slide swiper_{{ index }}">
                                                        <div class="brows-file-wrapper">
                                                            <img id="createfileImage"
                                                                 src="{{ asset(image.path) }}" alt=""
                                                                 data-black-overlay="6"
                                                            >
                                                            <label for="" title="No File Choosen"
                                                                   class="updateImageLabel_{{ index }}"
                                                                   id="updateImageLabel_{{ index }}">
                                                                <button type="button"
                                                                        name="deleteBtns"
                                                                        style="border: none !important;"
                                                                        data-bs-toggle="modal"
                                                                        data-bs-target="#confirmModel"
                                                                        data-value="{{ index }}">
                                                                    <i class="fa-regular fa-trash-can"></i>
                                                                </button>
                                                                <span class="text-center">Delete a File</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                {% endfor %}
                                            </div>
                                        {% endif %}
                                        <div class="swiper-pagination" id="paginationContent"></div>
                                    </div> #}-->

                                    {% if product.images|length <= 1 %}
                                        <input hidden="" name="createinputfile" id="createinputfile" type="file"
                                               class="inputfile" multiple>
                                        <div class="brows-file-wrapper" id="singLeImageUploaded"  data-value="{{ product.images[0].getIdImage() }}">
                                            <img id="createfileImage"
                                                 src="{{ asset(product.images[0].path) }}" alt=""
                                                 data-black-overlay="6">
                                            <label for="" title="No File Choosen"
                                                   class="updateImageLabel_0"
                                                   id="updateImageLabel_0">
                                                <button type="button"
                                                        name="deleteBtns"
                                                        style="border: none !important;"
                                                        data-bs-toggle="modal"
                                                        data-bs-target="#confirmModel"
                                                        data-value="0">
                                                    <i class="fa-regular fa-trash-can"></i>
                                                </button>
                                                <span class="text-center">Delete a File</span>
                                            </label>
                                        </div>
                                    {% else %}
                                        <div id="image-slider" class="splide">
                                            <input hidden="" name="createinputfile" id="createinputfile" type="file"
                                                   class="inputfile" multiple>
                                            <div class="splide__track">
                                                <ul class="splide__list">
                                                    {% for index,image in product.images %}
                                                        <li class="splide__slide slider_{{ index }}"
                                                            data-value="{{ image.getIdImage() }}">
                                                            <div class="brows-file-wrapper">
                                                                <img id="createfileImage"
                                                                     src="{{ asset(image.path) }}" alt=""
                                                                     data-black-overlay="6"
                                                                >
                                                                <label for="" title="No File Choosen"
                                                                       class="updateImageLabel_{{ index }}"
                                                                       id="updateImageLabel_{{ index }}">
                                                                    <button type="button"
                                                                            name="deleteBtns"
                                                                            style="border: none !important;"
                                                                            data-bs-toggle="modal"
                                                                            data-bs-target="#confirmModel"
                                                                            data-value="{{ index }}">
                                                                        <i class="fa-regular fa-trash-can"></i>
                                                                    </button>
                                                                    <span class="text-center">Delete a File</span>
                                                                </label>
                                                            </div>
                                                        </li>
                                                    {% endfor %}
                                                </ul>
                                            </div>
                                        </div>
                                    {% endif %}
                                    <input type="hidden" value="{{ product.images|length }}" id="nbrImages">
                                </div>
                                <div class="mt--50 mt_sm--30 mt_md--30 d-none d-lg-block">
                                    <div class="d-flex justify-content-center">
                                        <div class="col-md-4 col-sm-4">
                                            <div class="input-box rn-check-box">
                                                <input class="rn-check-box-input" type="checkbox" id="deleteImage"
                                                       checked>
                                                <label class="rn-check-box-label" for="deleteImage">
                                                    Delete Image
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-4 col-sm-4">
                                            <div class="input-box  rn-check-box">
                                                <input class="rn-check-box-input" type="checkbox" id="uploadImage">
                                                <label class="rn-check-box-label" for="uploadImage">
                                                    Upload Image
                                                </label>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            {% endif %}

                            <!-- end upoad file area -->
                            <div class="mt--50 mt_sm--30 mt_md--30 d-none d-lg-block">
                                <h5>Note:</h5>
                                <span><strong>Click The Ai Button And You Will Get A Generated Description Of The Product Based On Its Title</strong></span
                                >
                            </div>
                        </div>

                        <div class="col-lg-7">
                            <div class="form-wrapper-one">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="input-box pb--20">
                                            <label for="name" class="form-label">Product Name</label>
                                            <input
                                                    id="name"
                                                    placeholder="e. g. `Digital Awesome Game`"
                                                    {% if update %}
                                                        value="{{ product.name }}"
                                                    {% endif %}
                                            />
                                            <div id="error-message" class="error">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-12">
                                        <div class="input-box pb--20 ">
                                            <div class="flex">
                                                <label for="description" class="form-label mt-3">
                                                    Discription
                                                </label>
                                                <button type="button"
                                                        id="ai_btn" class="btn ai_btn"
                                                        onclick="generateDescreption()">
                                                    <i class="fi fi-rr-artificial-intelligence "></i>
                                                </button>
                                            </div>
                                            <textarea
                                                    id="description"
                                                    placeholder="e. g. “After purchasing the product you can get item...”"
                                                    style="min-height: 200px;"
                                                    class=""

                                            ></textarea>
                                            <div id="error-message-desc" class="error">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="input-box pb--20">
                                            <label for="price" class="form-label"
                                            >Item Price in Dt</label
                                            >
                                            <input id="price" placeholder="e. g. `20Dt`"
                                                    {% if update %}
                                                        value="{{ product.price }} Dt"
                                                    {% endif %}
                                            />
                                            <div id="error-message-price" class="error">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="input-box pb--20">
                                            <label for="quantity" class="form-label">Quantity</label>
                                            <input id="quantity" placeholder="e. g. `10`"
                                                    {% if update %}
                                                        value="{{ product.quantity }}"
                                                    {% endif %}
                                            />
                                            <div id="error-message-quantity" class="error">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <!--{# <div class="input-box pb&#45;&#45;20 collection-single-wized">
                                            <label for="category" class="form-label">Category</label>
                                            &lt;!&ndash; #}{#         <input id="Propertie" placeholder="e. g. `Sport`"/> #}{# &ndash;&gt;
                                            <select id="category">
                                                <option value="food" selected>Food</option>
                                                <option value="sports">Sports</option>
                                                <option value="entertainment">Entertainment</option>
                                                <option value="realestate">RealEstate</option>
                                                <option value="vehicul">Vehicul</option>
                                            </select>
                                        </div> #}-->
                                        <div class="collection-single-wized " style="margin-top: -20px !important;">
                                            <label for="category" class="title mt--10" style="margin: 10px 0 -10px 0; !important;">Category</label>
                                            <div class="create-collection-input" >
                                                <select id="category">
                                                    <option id="food" value="food" selected>Food</option>
                                                    <option value="sports" id="sports">Sports</option>
                                                    <option value="entertainment" id="entertainment">Entertainment</option>
                                                    <option value="realestate" id="realestate">RealEstate</option>
                                                    <option value="vehicul" id="vehicul">Vehicul</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="col-md-12 col-sm-12">

                                    </div>
                                    <div class="col-md-12 col-xl-4">
                                        <div class="input-box">
                                            <button
                                                    type="button"
                                                    class="btn btn-primary-alta btn-large w-100"
                                                                                                data-bs-toggle="modal"
                                                                                                data-bs-target="#uploadModal"
                                                    onclick="consultProd()"
                                            >
                                                Preview
                                            </button>
                                        </div>
                                    </div>

                                    <div class="col-md-12 col-xl-8 mt_lg--15 mt_md--15 mt_sm--15">
                                        <div class="input-box">
                                            {% if update == true %}
                                                <a class="btn btn-primary btn-large w-100"
                                                   onclick="updateProduct({{ product.idProduct }})"
                                                >
                                                    Update Item
                                                </a>
                                            {% else %}
                                                <button class="btn btn-primary btn-large w-100"
                                                        onclick="createProduct()"
                                                >
                                                    Submit Item
                                                </button>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt--100 mt_sm--30 mt_md--30 d-block d-lg-none">
                            <h5>Note:</h5>
                            <span> Service fee : <strong>2.5%</strong> </span> <br/>
                            <span> You will receive : <strong>25.00 ETH $50,000</strong></span>
                        </div>

                    </div>
                </div>
                <div class="message_class" id="message">
                </div>
            </div>


            <!-- create new product area -->

            <!-- Modal -->
            <div
                    class="rn-popup-modal upload-modal-wrapper modal fade"
                    id="uploadModal"
                    tabindex="-1"
                    aria-hidden="true"
            >
                <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                >
                    <i data-feather="x"></i>
                </button>
                <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                    <div class="modal-content share-wrapper">
                        <div class="modal-body">
                            <div class="product-style-one no-overlay">
                                <div class="card-thumbnail">
                                    <a href="../pages/product-details.html"
                                    >
                                        <!-- Swiper -->
                                        <div class="swiper rounded effect-creative-swiper" id="slider">

                                        </div>

                                    </a>
                                </div>
                                <div class="product-share-wrapper">
                                    <div class="profile-share">
                                        <a
                                                href="author.html"
                                                class="avatar"
                                                data-tooltip="Buyer:No One"
                                        ><img
                                                    src="{{ asset('marketPlaceImages/anonemous.png') }}"
                                                    alt="Nft_Profile"
                                            />
                                        </a>
                                        <a class="more-author-text" href="#">No one bought this Product yet</a>
                                    </div>
                                    <div class="share-btn share-btn-activation dropdown">
                                        <button
                                                class="icon"
                                                type="button"
                                                data-bs-toggle="dropdown"
                                                aria-expanded="false"
                                        >
                                            <svg
                                                    viewBox="0 0 14 4"
                                                    fill="none"
                                                    width="16"
                                                    height="16"
                                                    class="sc-bdnxRM sc-hKFxyN hOiKLt"
                                            >
                                                <path
                                                        fill-rule="evenodd"
                                                        clip-rule="evenodd"
                                                        d="M3.5 2C3.5 2.82843 2.82843 3.5 2 3.5C1.17157 3.5 0.5 2.82843 0.5 2C0.5 1.17157 1.17157 0.5 2 0.5C2.82843 0.5 3.5 1.17157 3.5 2ZM8.5 2C8.5 2.82843 7.82843 3.5 7 3.5C6.17157 3.5 5.5 2.82843 5.5 2C5.5 1.17157 6.17157 0.5 7 0.5C7.82843 0.5 8.5 1.17157 8.5 2ZM11.999 3.5C12.8274 3.5 13.499 2.82843 13.499 2C13.499 1.17157 12.8274 0.5 11.999 0.5C11.1706 0.5 10.499 1.17157 10.499 2C10.499 2.82843 11.1706 3.5 11.999 3.5Z"
                                                        fill="currentColor"
                                                ></path>
                                            </svg>
                                        </button>

                                        <div
                                                class="share-btn-setting dropdown-menu dropdown-menu-end"
                                        >
                                            <button
                                                    type="button"
                                                    class="btn-setting-text share-text"
                                                    data-bs-toggle="modal"
                                                    data-bs-target="#placebidModal"
                                            >
                                                Place Bid
                                            </button>

                                            <button
                                                    type="button"
                                                    class="btn-setting-text share-text"
                                                    data-bs-toggle="modal"
                                                    data-bs-target="#shareModal"
                                            >
                                                Share
                                            </button>
                                            <button
                                                    type="button"
                                                    class="btn-setting-text report-text"
                                                    data-bs-toggle="modal"
                                                    data-bs-target="#reportModal"
                                            >
                                                Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <a href="../pages/product-details.html"
                                ><span class="product-name"><strong id="name_model">Banana</strong></span></a
                                >
                                <span class="latest-bid">
                                    <span id="quantity_model">10 Pieces/</span>
                                    <strong
                                            style="color: #2899d8">In Stock
                                    </strong>
                                <br>
                                    <span id="category_model">
                                        Sports
                                    </span>
                                </span>
                                <div class="bid-react-area">
                                    <div class="last-bid" id="price_model">120 DT</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>




    <!-- Modal -->
    <div
            class="rn-popup-modal report-modal-wrapper modal fade"
            id="confirmModel"
            tabindex="-1"
            aria-hidden="true"
    >
        <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
        >
            <i data-feather="x"></i>
        </button>
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content report-content-wrapper">
                <div class="modal-header report-modal-header align-self-center">
                    <h2 class="modal-title" style="color: #2899d8">Confirmation</h2>
                </div>
                <div class="modal-body overflow-hidden align-content-center">
                    <p class="title">
                        Are you sure you want to delete this image
                    </p>
                    <div class="report-form-box">
                        <div class="d-flex gap-2 justify-content-end me-0">
                            <button type="button" class="btn btn-primary mr&#45;&#45;10 w-auto"
                                    onclick="deleteImage()">
                                Yes
                            </button>
                            <button
                                    type="button"
                                    class="btn btn-primary-alta w-auto"
                                    data-bs-dismiss="modal"
                            >
                                Cancel
                            </button>
                        </div>
                    </div>
                    <input type="hidden" id="modelValue">
                </div>
            </div>
        </div>
    </div>



{% endblock %}


{% block scripts %}

    {% if update %}
        <script>
            window.onload = function () {
                $('#description').val({{ product.description|json_encode|raw }});
                $('#{{ product.category }}').prop('selected');
            }
        </script>
    {% endif %}
    <script src="{{ asset('js/product.js') }}"></script>
{% endblock %}
