{% extends 'index_admin.html.twig' %}

{% block body %}
<div class="container">
  <div class="row">
    <!-- Total Reclamations -->
    <div class="col-xl-4 col-sm-6 mb-4">
      <div class="card">
        <div class="card-body">
          <h5>Total Reclamations</h5>
          <p>{{ statistics.total_reclamations }}</p>
        </div>
      </div>
    </div>
    <!-- Responded Reclamations -->
    <div class="col-xl-4 col-sm-6 mb-4">
      <div class="card">
        <div class="card-body">
          <h5>Responded Reclamations</h5>
          <p>{{ statistics.responded_reclamations }}</p>
        </div>
      </div>
    </div>
    <!-- Pending Reclamations -->
    <div class="col-xl-4 col-sm-6 mb-4">
      <div class="card">
        <div class="card-body">
          <h5>Pending Reclamations</h5>
          <p>{{ statistics.pending_reclamations }}</p>
        </div>
      </div>
    </div>
  </div>
  <!-- Chart for Reclamation Statistics -->
  <div class="row mt-4">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Reclamation Statistics</h5>
          <div id="chart_div" style="width: 100%; height: 500px;"></div>
        </div>
      </div>
    </div>
  </div>
</div>



<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
  google.charts.load('current', {'packages':['corechart']});
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {
  console.log("Drawing chart");
  var data = google.visualization.arrayToDataTable([
    ['Type', 'Number'],
    ['Total', {{ statistics.total_reclamations|json_encode }}],
    ['Responded', {{ statistics.responded_reclamations|json_encode }}],
    ['Pending', {{ statistics.pending_reclamations|json_encode }}]
  ]);

  console.log(data.toJSON()); // This will show you the data structure in the console

  var options = {
    title: 'Reclamation Statistics',
    chartArea: {width: '50%'},
    hAxis: {
      title: 'Total Reclamations',
      minValue: 0
    },
    vAxis: {
      title: 'Type'
    }
  };

  var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
  chart.draw(data, options);
}
</script>
{% endblock %}
