{% extends 'base.html.twig' %}

{% block title %}add ReclamationController!
{% endblock %}

{% block body %}
	<!-- start page title area -->
	<div class="rn-breadcrumb-inner ptb--30">
		<div class="container">
			<div class="row align-items-center">
				<div class="col-lg-6 col-md-6 col-12">
					<h5 class="title text-center text-md-start">Add Reclamation
					</h5>
				</div>
				<div class="col-lg-6 col-md-6 col-12">
					<ul class="breadcrumb-list">
						<li class="item">
							<a href="index.html">Home</a>
						</li>
						<li class="separator">
							<i class="feather-chevron-right"></i>
						</li>
						<li class="item current">Reclamation</li>
						{% for message in app.flashes('success') %}
							<div class="alert alert-success">
								{{message}}
							</div>
						{% endfor %}

					</ul>
				</div>
			</div>
		</div>
	</div>
	<!-- end page title area -->

	<!-- create new product area -->
	<div class="create-area rn-section-gapTop">
		<div class="container">
			<div class="row g-5">
				<div class="col-lg-3 offset-1 ml_md--0 ml_sm--0">
					<form id="form" name="reclamation" method="post" enctype="multipart/form-data">
						<div class="upload-area">
							<div class="upload-formate mb--30">
								<h6 class="title">
									Upload file
								</h6>
								<p class="formate">
									Drag or choose your file to upload
								</p>
							</div>
							<div class="brows-file-wrapper">
								<input type="file" name="reclamation[imageFile][file]" id="reclamation_imageFile_file" required="required" accept="image/*" class="inputfile"/>
								<img id="createfileImage" src="{{ asset('/assets/images/portfolio/1.jpeg') }}" alt data-black-overlay="6">
								<label for="reclamation_imageFile_file" title="No File Choosen">
									<i class="feather-upload"></i>
									<span class="text-center">Choose a File</span>
									<p class="text-center mt--9">PNG, GIF, WEBP, MP4 or MP3.
										<br>
										Max 1Gb.</p>
								</label>
							</div>
						</div>

						<script>
							const input = document.getElementById('reclamation_imageFile_file');
const img = document.getElementById('createfileImage');

input.addEventListener('change', function () {
if (input.files && input.files[0]) {
const reader = new FileReader();

reader.onload = function (e) {
img.setAttribute('src', e.target.result);
}

reader.readAsDataURL(input.files[0]);
}
});
						</script>
						<div class="mt--100 mt_sm--30 mt_md--30 d-none d-lg-block">
							<h5>Note:
							</h5>
							<span>enjoy our Service
							</span>
							<br>
							<span>You will receive our reponse soon
							</span>
						</div>
					</div>
					<div class="col-lg-7">
						<div class="form-wrapper-one">
							<div class="col-md-12">
								<div class="input-box pb--20">
									<div>
										<label for="reclamation_privateKey" class="required">Private Key</label>
										<input type="text" id="reclamation_privateKey" name="reclamation[privateKey]" />
										<span class="error-message">{{ form_errors(form.privateKey) }}</span>
										<div class="tooltip">
											<i class="fas fa-info-circle"></i>
											<span class="tooltiptext">Must be a number</span>
										</div>
									</div>
								</div>
							</div>
							<div class="col-md-12">
								<div class="input-box pb--20">
									<div>
										<label for="reclamation_subject" class="required">Subject</label>
										<input type="text" id="reclamation_subject" name="reclamation[subject]" />
										<span class="error-message">{{ form_errors(form.subject) }}</span>
										<div class="tooltip">
											<i class="fas fa-info-circle"></i>
											<span class="tooltiptext">Must be a string</span>
										</div>
									</div>
								</div>
							</div>
							<div class="col-md-12">
								<div class="input-box pb--20">
									<div>
										<label for="reclamation_description" class="required">Description</label>
										<textarea id="reclamation_description" name="reclamation[description]" ></textarea>
										<span class="error-message">{{ form_errors(form.description) }}</span>
										<div class="tooltip">
											<i class="fas fa-info-circle"></i>
											<span class="tooltiptext">Must be a string</span>
										</div>
									</div>
								</div>
							</div>
							<span></span>
							<span></span>
							<div class="col-md-12">
								<div class="input-box">
									<button type="submit" class="btn btn-primary" id="submit-button">Submit</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<input type="hidden" id="reclamation__token" name="reclamation[_token]" value="edfefdd8a408443a012c.c_gIArByPEgON4s4Sv8_WXHe6FRKy7Ah9XqrA6GoLmk.PcxBY9cWTX9gBthxC8tSCQHp0SAsifMRmBvTNtDwTCA3sHt7xB9lJUF23g"/>
	</form>
	<script>
		(function () {
const form = document.getElementById('form');
const submitButton = document.getElementById('submit-button');
// Add a submit event listener to the form element
form.addEventListener('submit', function (event) {
event.preventDefault();
// Check if the form is valid
if (form.checkValidity()) {
const formData = new FormData(form);
fetch('/reclamation', {
method: 'POST',
body: formData
}).then(response => response.text()).then(data => {
Swal.fire({title: 'Success!', text: 'Your reclamation has been submitted.', icon: 'success', confirmButtonText: 'Thank You'}).then(() => {
 // Clear all the form fields
const inputs = form.querySelectorAll('input, textarea');
inputs.forEach(input => {
input.value = '';
});

form.reset();
});
}).catch(error => {

console.error(error);
Swal.fire({title: 'Error!', text: error.message, icon: 'error', confirmButtonText: 'OK'});
});
}
});
submitButton.addEventListener('click', function (event) {

if (form.checkValidity()) {
form.reportValidity();
}
});
})();

	</script>
<script>
	const primarykey = /^[0-9]+$/; 
	const nameRegex = /^[A-Za-z\s]+$/;  
	const lastNameRegex = /^[A-Za-z\s]+$/; 
	
	
	function validateName() {
		const nameInput = document.getElementById('reclamation_subject');
		const name = nameInput.value.trim();
		if (nameRegex.test(name)) {
			nameInput.style.borderColor = 'green';
			return true;
		} else {
			nameInput.style.borderColor = 'red';
			nameInput.setCustomValidity('Subject is not valid');
			return false;
		}
	}
	function validateLastName() {
		const lastNameInput = document.getElementById('reclamation_description');
		const lastName = lastNameInput.value.trim();
		if (lastNameRegex.test(lastName)) {
			lastNameInput.style.borderColor = 'green';
			return true;
		} else {
			lastNameInput.style.borderColor = 'red';
			
			return false;
		}
	}
	function validatePrimaryKey() {
		const primaryKeyInput = document.getElementById('reclamation_privateKey');
		const primaryKey = primaryKeyInput.value.trim();
		if (primarykey.test(primaryKey)) {
			primaryKeyInput.style.borderColor = 'green';
			return true;
		} else {
			primaryKeyInput.style.borderColor = 'red';
			
			return false;
		}
	}
	// Add event listeners for input fields
	document.getElementById('reclamation_subject').addEventListener('input', validateName);
	document.getElementById('reclamation_description').addEventListener('input', validateLastName);
	document.getElementById('reclamation_privateKey').addEventListener('input', validatePrimaryKey);
	
	// Add tooltips to input fields
	const tooltips = document.querySelectorAll('.tooltip');
	tooltips.forEach(tooltip => {
		tooltip.addEventListener('mouseover', () => {
			tooltip.querySelector('.tooltiptext').style.display = 'block';
		});
		tooltip.addEventListener('mouseout', () => {
			tooltip.querySelector('.tooltiptext').style.display = 'none';
		});
	});
</script>

{% endblock %}


